{% if page.extra.related_posts or page.extra.related_readings %}
<aside class="related-content">
  {% if page.extra.related_posts %}
  <div class="related-content__section">
    <h2 class="related-content__heading">{{ trans(key="related_posts", lang=lang) }}</h2>
    <div class="related-content__cards">
      {% for path in page.extra.related_posts %}
        {% set related = get_page(path=path) %}
        <a href="{{ related.permalink }}" class="related-card">
          <span class="related-card__date">{% if lang == "es" %}{{ related.date | date(format="%d/%m/%Y") }}{% else %}{{ related.date | date(format="%b %d, %Y") }}{% endif %}</span>
          <h3 class="related-card__title">{{ related.title }}</h3>
          {% if related.extra.subtitle %}
            <p class="related-card__subtitle">{{ related.extra.subtitle }}</p>
          {% endif %}
        </a>
      {% endfor %}
    </div>
  </div>
  {% endif %}

  {% if page.extra.related_readings %}
  <div class="related-content__section">
    <h2 class="related-content__heading">{{ trans(key="related_readings", lang=lang) }}</h2>
    <div class="related-content__inline">
      {% for path in page.extra.related_readings %}
        {% set related = get_page(path=path) %}
        <a href="{{ related.permalink }}" class="related-inline">
          <i class="fa-solid fa-book"></i>
          <span>{{ related.title }}{% if related.extra.author %} <span class="related-inline__author">by {{ related.extra.author }}</span>{% endif %}</span>
        </a>
      {% endfor %}
    </div>
  </div>
  {% endif %}
</aside>
{% endif %}
