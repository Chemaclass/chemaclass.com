{% extends "base.html" %}

{% import "partials/macros.html" as macros %}

{% block posthead %}
  {% if page.lower %}
  <link rel="prerender" href="{{ page.lower.permalink }}">
  {% endif %}

  {% if page.higher %}
  <link rel="prerender" href="{{ page.higher.permalink }}">
  {% endif %}

  {% for tag in page.taxonomies.tags %}
  <link rel="prerender" href='{{ get_taxonomy_url(kind="tags", name=tag) }}'>
  {% endfor %}

  {% set schema_type = "NewsArticle" %}
  {% include "partials/post-schema.html" %}
{% endblock posthead %}

{% block content %}
  <article class="talk-single">
    <!-- Back link -->
    <a href="{{ macros::lang_path(path='/talks/', lang=lang) }}" class="talk-single__back">
      {{ macros::back_arrow() }}
      {{ trans(key="all_talks", lang=lang) }}
    </a>

    <!-- Hero section -->
    <header class="talk-single__hero">
      <h1 class="talk-single__title">{{ page.title }}</h1>
      {% if page.extra.subtitle %}
        <p class="talk-single__subtitle">{{ page.extra.subtitle }}</p>
      {% endif %}
      {% if page.taxonomies.tags %}
        <div class="talk-single__tags">
          {% for tag in page.taxonomies.tags %}
            <a href="{{ get_taxonomy_url(kind='tags', name=tag) }}" class="talk-single__tag">{{ tag }}</a>
          {% endfor %}
        </div>
      {% endif %}
    </header>

    <!-- Content (appearances list + images) -->
    <section class="talk-single__content"
             data-hl-save="{{ trans(key='highlight_save', lang=lang) }}"
             data-hl-remove="{{ trans(key='highlight_remove', lang=lang) }}"
             data-hl-share-x="{{ trans(key='highlight_share_x', lang=lang) }}"
             data-hl-share-linkedin="{{ trans(key='highlight_share_linkedin', lang=lang) }}"
             data-hl-copy-quote="{{ trans(key='highlight_copy_quote', lang=lang) }}"
             data-hl-copied="{{ trans(key='highlight_copied', lang=lang) }}"
             data-hl-saved="{{ trans(key='highlight_saved', lang=lang) }}"
             data-hl-removed="{{ trans(key='highlight_removed', lang=lang) }}">
      {{ page.content | safe }}
    </section>

    <!-- Navigation between talks -->
    <nav class="talk-single__nav">
      {% if page.lower %}
        <a href="{{ page.lower.permalink }}" class="talk-single__nav-link talk-single__nav-link--prev">
          <span class="talk-single__nav-label">{{ trans(key="previous", lang=lang) }}</span>
          <span class="talk-single__nav-title">{{ page.lower.title }}</span>
        </a>
      {% else %}
        <span></span>
      {% endif %}
      {% if page.higher %}
        <a href="{{ page.higher.permalink }}" class="talk-single__nav-link talk-single__nav-link--next">
          <span class="talk-single__nav-label">{{ trans(key="next", lang=lang) }}</span>
          <span class="talk-single__nav-title">{{ page.higher.title }}</span>
        </a>
      {% endif %}
    </nav>
  </article>

  {% include "partials/footer-about.html" %}
{% endblock content %}
