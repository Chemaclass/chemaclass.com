{% macro pinned_post_preview(post) %}
<div class="preview post-preview highlighted">
  <h3 class="post-title">
    <a href="{{ post.permalink }}">{{ post.title }}</a>
    {{ self::author(post=post) }}
    {{ self::subtitle(post=post) }}
  </h3>
  <small>
    {{ self::date_and_words(post=post) }}
  </small>
  <div class="summary">
    {{ self::summary(post=post) }}
  </div>
</div>
{% endmacro %}

{% macro pinned_reading_preview(post) %}
<div class="preview reading-preview-highlighted">
  <h3 class="reading-title">
    <a href="{{ post.permalink }}">{{ post.title }}</a>
    {{ self::author(post=post) }}
    {{ self::subtitle(post=post) }}
  </h3>
  <small>
    {{ post.date| date(format="%B %d, %Y") }}
  </small>
  <div class="summary">
    {{ self::summary(post=post,read_more=false) }}
  </div>
</div>
{% endmacro %}

{% macro post_preview(post) %}
<div class="preview post-preview">
  <h3 class="post-title">
    <a href="{{ post.permalink }}">{{ post.title }}</a>
    {{ self::subtitle(post=post) }}
  </h3>
  <small>
    {{ self::date_and_words(post=post) }}
  </small>
  <div class="summary">
    {{ self::summary(post=post) }}
  </div>
</div>
{% endmacro %}

{% macro reading_preview(post) %}
<div class="reading-preview">
  <h4>
    {{ post.date| date(format="%B %d, %Y") }}
  </h4>
  <div class="summary">
    {{ self::summary(post=post,read_more=false) }}
  </div>
  <h3 class="reading-title">
    <a href="{{ post.permalink }}">{{ post.title }}</a>
    <br>
    {{ self::author(post=post) }}
  </h3>
</div>
{% endmacro %}

{% macro book_preview(post) %}
<div class="preview book-preview">
  <h3 class="book-title">
    <a href="{{ post.permalink }}">{{ post.title }}</a>
  </h3>
  <small>
    {{ self::date_and_words(post=post) }}
  </small>
</div>
{% endmacro %}

{% macro date_and_words(post) %}
  {% if post.word_count > 0 -%}
    {{ post.date| date(format="%B %d, %Y") }} - {{ post.word_count }} words -
    {% if post.reading_time == 1 %}
      {{ post.reading_time }} min
    {% else %}
      {{ post.reading_time }} mins
    {% endif %}
  {% else %}
    {{ post.date| date(format="%B %d, %Y") }}
  {%- endif %}
{% endmacro %}

{% macro summary(post,read_more=true) %}
  {% if post.summary -%}
    {{ post.summary | safe  }}
  {% else %}
    {{ post.content | safe | striptags | truncate(length=300) }}
  {%- endif %}

  {% if read_more and post.content | length > 300 -%}
    <a href="{{ post.permalink }}">read more</a>
  {%- endif %}
{% endmacro %}

{% macro author(post) %}
  {% if post.extra.author %}
    <small class="author">{{ post.extra.author }}</small>
  {% endif %}
{% endmacro %}

{% macro subtitle(post) %}
  {% if post.extra.subtitle %}
    <br>
    <small style="margin-top: 0; color: #404040; font-size: 0.8em;">
      {{ post.extra.subtitle }}
    </small>
  {% endif %}
{% endmacro %}

{% macro footer() %}
  {% if config.extra.footer_about %}
    <div class="footer-about">
      {{ config.extra.footer_about | markdown | safe }}
    </div>
  {% endif %}
{% endmacro %}
