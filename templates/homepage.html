{% extends "base.html" %}

{% block title %}
{{ trans(key="home_title_tag", lang=lang) }}
{% endblock %}


{% block styles%}
<link rel="stylesheet" href="{{ get_url(path='index.css') | safe }}">
<link rel="preload" href="{{ get_url(path='custom.css') | safe }}" as="style" onload="this.onload=null;this.rel='stylesheet'">
<link rel="preload" href="{{ get_url(path='search.css') | safe }}" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript>
  <link rel="stylesheet" href="{{ get_url(path='custom.css') | safe }}">
  <link rel="stylesheet" href="{{ get_url(path='search.css') | safe }}">
</noscript>
{% endblock styles %}

{% block posthead %}
{% set profile_image = resize_image(path=config.extra.profile_large, width=360, height=360, op="fill") %}
<link rel="prefetch" href="{{ profile_image.url }}">

<!-- Person Schema for homepage -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Person",
  "name": "Jose Maria Valera Reales",
  "alternateName": "Chemaclass",
  "url": "{{ config.base_url | safe }}",
  "image": "{{ get_url(path=config.extra.default_og_image) | safe }}",
  "jobTitle": "Tech Lead",
  "description": "{{ config.description }}",
  "worksFor": {
    "@type": "Organization",
    "name": "Purpose Green",
    "url": "https://www.purpose-green.com/"
  },
  "knowsAbout": ["PHP", "Software Architecture", "TDD", "Leadership", "Open Source", "Bash", "Laravel", "Symfony"],
  "sameAs": [
    "https://x.com/Chemaclass",
    "https://github.com/Chemaclass",
    "https://www.linkedin.com/in/jose-maria-valera-reales/"
  ]
}
</script>

<!-- WebSite Schema for sitelinks search box -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebSite",
  "name": "Chemaclass",
  "url": "{{ config.base_url | safe }}",
  "description": "{{ config.description }}",
  "inLanguage": ["en", "es"],
  "author": {
    "@type": "Person",
    "name": "Jose Maria Valera Reales"
  },
  "potentialAction": {
    "@type": "SearchAction",
    "target": {
      "@type": "EntryPoint",
      "urlTemplate": "{{ config.base_url | safe }}/?q={search_term_string}"
    },
    "query-input": "required name=search_term_string"
  }
}
</script>

{% endblock posthead %}

{% block content %}
<div class="homepage-container">
    <!-- Top Row: Hero Left + Nav/Search/About Right -->
    <div class="homepage-top">
        <!-- Left Column: Hero -->
        <section class="hero-content">
            <div class="profile">
                <div class="profile-container">
                    <img src="{{ profile_image.url }}" alt="{{ trans(key="home_profile_alt", lang=lang) }}" width="360" height="360" decoding="async"/>
                </div>
            </div>
            <div class="hero-text">
                <h1>Chemaclass</h1>
                <p class="subtitle">
                    {{ trans(key="home_subtitle", lang=lang) }}
                </p>
                <div class="hero-quotes">
                    <blockquote class="hero-quote active"><p></p></blockquote>
                </div>
            </div>
        </section>

        <!-- Right Column: About -->
        <div class="homepage-right">
            <section class="about-section">
                <div class="about-card">
                    <h2>{{ trans(key="home_about", lang=lang) }}</h2>
                    <ul class="about-list">
                        <li class="expandable">
                            <div class="about-item-header" tabindex="0" role="button" aria-expanded="false">
                                <span class="list-icon"><i class="fa-solid fa-seedling"></i></span>
                                <span class="about-item-title">{% if lang == "es" %}Tech Lead en <a target="_blank" rel="noopener" href="https://www.purpose-green.com/" class="purpose-green-link">Purpose Green</a>{% else %}Tech Lead at <a target="_blank" rel="noopener" href="https://www.purpose-green.com/" class="purpose-green-link">Purpose Green</a>{% endif %}</span>
                                <span class="expand-arrow"><i class="fa-solid fa-chevron-down"></i></span>
                            </div>
                            <div class="about-item-content">
                                <p>{{ trans(key="home_about_1_desc", lang=lang) }}</p>
                            </div>
                        </li>
                        <li class="expandable">
                            <div class="about-item-header" tabindex="0" role="button" aria-expanded="false">
                                <span class="list-icon"><i class="fa-solid fa-code"></i></span>
                                <span class="about-item-title">{% if lang == "es" %}{{ config.extra.years_software }}+ años en software, {{ config.extra.years_leadership }}+ en liderazgo{% else %}{{ config.extra.years_software }}+ years in software, {{ config.extra.years_leadership }}+ in leadership{% endif %}</span>
                                <span class="expand-arrow"><i class="fa-solid fa-chevron-down"></i></span>
                            </div>
                            <div class="about-item-content">
                                <p>{{ trans(key="home_about_2_desc", lang=lang) }}</p>
                            </div>
                        </li>
                        <li class="expandable">
                            <div class="about-item-header" tabindex="0" role="button" aria-expanded="false">
                                <span class="list-icon"><i class="fa-solid fa-check-double"></i></span>
                                <span class="about-item-title">{{ trans(key="home_about_3_title", lang=lang) }}</span>
                                <span class="expand-arrow"><i class="fa-solid fa-chevron-down"></i></span>
                            </div>
                            <div class="about-item-content">
                                <p>{{ trans(key="home_about_3_desc", lang=lang) }}</p>
                            </div>
                        </li>
                        <li class="expandable">
                            <div class="about-item-header" tabindex="0" role="button" aria-expanded="false">
                                <span class="list-icon"><i class="fa-solid fa-users"></i></span>
                                <span class="about-item-title">{{ trans(key="home_about_4_title", lang=lang) }}</span>
                                <span class="expand-arrow"><i class="fa-solid fa-chevron-down"></i></span>
                            </div>
                            <div class="about-item-content">
                                <p>{{ trans(key="home_about_4_desc", lang=lang) }}</p>
                            </div>
                        </li>
                    </ul>
                    <p class="philosophy">
                        <span class="philosophy-main">{{ trans(key="home_philosophy_main", lang=lang) | safe }}</span>
                        <span class="philosophy-subtitle">{{ trans(key="home_philosophy_sub", lang=lang) | safe }}</span>
                    </p>
                </div>
            </section>
        </div>
    </div>

    <!-- Skills Section -->
    <section class="skills-section">
        <div class="skills-tags">
            <a href="/blog/tags/php/" class="skill-tag lang">PHP</a>
            <a href="/blog/tags/bash/" class="skill-tag lang">Bash</a>
            <span class="skill-tag lang">Lisp</span>
            <span class="skill-tag tool">Laravel</span>
            <span class="skill-tag tool">Symfony</span>
            <span class="skill-tag tool">PHPUnit</span>
            <span class="skill-tag tool">PHPStan</span>
            <span class="skill-tag infra">Docker</span>
            <span class="skill-tag infra">AWS</span>
            <span class="skill-tag db">PostgreSQL</span>
            <span class="skill-tag db">MySQL</span>
            <span class="skill-tag db">Redis</span>
            <a href="/blog/tags/tdd/" class="skill-tag practice">TDD</a>
            <a href="/blog/tags/xp/" class="skill-tag practice">XP</a>
            <a href="/blog/tags/open-source/" class="skill-tag practice">{{ trans(key="home_skill_open_source", lang=lang) }}</a>
            <a href="/blog/tags/leadership/" class="skill-tag soft">{{ trans(key="home_skill_leadership", lang=lang) }}</a>
            <a href="/blog/tags/communication/" class="skill-tag soft">{{ trans(key="home_skill_communication", lang=lang) }}</a>
        </div>
    </section>

    <!-- Projects Section -->
    <section class="projects-section">
        <div class="section-header">
            <h2>{{ trans(key="home_projects", lang=lang) }}</h2>
            <a href="https://github.com/Chemaclass" target="_blank" rel="noopener" class="view-all">{{ trans(key="home_view_all", lang=lang) }}</a>
        </div>
        <div class="projects-grid">
            <a target="_blank" rel="noopener" href="https://bashunit.typeddevs.com/" class="project-card" data-repo="TypedDevs/bashunit">
                <span class="project-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 362.8 362.8"><path d="M317.5 0H45.4C20.3 0 0 20.3 0 45.4v272.1c0 25 20.3 45.4 45.4 45.4h272.1c25 0 45.4-20.3 45.4-45.4V45.4C362.8 20.3 342.5 0 317.5 0z" fill="#2e3436"/><path d="M259.3 317.5c11.2-4 21.6-10.1 30.5-17.9 4.9 10.9 15.7 17.9 27.6 17.9h-58.1zM226.8 45.3h-90.7C86 45.3 45.3 86 45.3 136.1v38.3c12.5-34.8 43.9-59.4 80.7-63.3.6-17.5 2.8-35 6.8-52.1a5.68 5.68 0 0 1 4.5-4.3c3.1-.5 6 1.5 6.6 4.6 3 16.8 10.6 32.5 22 45.2 1.6 1.8 2.9 3.9 3.9 6.1h5.4c2.4-21.3 12.9-40.9 29.3-54.6 1.3-1.1 3-1.5 4.6-1.2 3.1.6 5.1 3.5 4.6 6.6-3 16.8-1.2 34.2 5.2 50 .4.9.7 1.9.9 2.9 19.5 7.7 32.3 26.5 32.3 47.5v29.8c0 15.6-12.7 28.3-28.3 28.3h-78c-1.6 0-2.8-1.3-2.8-2.8 0-1.6 1.3-2.8 2.8-2.8h78c12.5 0 22.7-10.2 22.7-22.7v-29.8c0-25-20.3-45.4-45.3-45.4H136c-50.1 0-90.7 40.6-90.7 90.7v19.8c0 50.1 40.6 90.7 90.7 90.7h90.7c50.1 0 90.7-40.6 90.7-90.7v-90.7c.1-50.2-40.5-90.9-90.6-90.9zm-78 119.8c0-13.5 11-24.4 24.5-24.4s24.4 11 24.4 24.5-11 24.4-24.5 24.4c-13.4 0-24.4-11-24.4-24.5z" fill="#eceeee"/><path d="M161.7 108.3c-12.1-13.5-20.2-30.1-23.4-48-4.5 19.5-6.8 39.5-6.8 59.6a17.31 17.31 0 0 0 17.3 17.3 17.31 17.31 0 0 0 17.3-17.3c0-4.4-1.6-8.5-4.4-11.6zm51.5 3.7c-6.3-16.5-8.1-34.3-5-51.7C193.1 73 183.3 91 181 110.6h20.3c4 0 8 .4 11.9 1.4z" fill="#8ae234"/></svg>
                </span>
                <div class="project-info">
                    <div class="project-title">
                        <h3>bashunit</h3>
                        <span class="github-stars"><i class="fa-solid fa-star"></i> <span class="star-count"></span></span>
                    </div>
                    <p>{{ trans(key="home_project_bashunit_desc", lang=lang) }}</p>
                </div>
            </a>
            <a target="_blank" rel="noopener" href="https://phel-lang.org" class="project-card" data-repo="phel-lang/phel-lang">
                <span class="project-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200.3 167.7"><path d="M6 66l95 96h36V93l-36-74H42L6 56v106h36l24-35" fill="none" stroke="#512da8" stroke-width="8"/><path d="M137 93l58-3-12-58-32-26h-34l-16 13-23 9-12 22 46 52z" fill="none" stroke="#512da8" stroke-width="8"/><path d="M195 90l-12 57h-13l-2-56m2 56l-13-11h12" fill="none" stroke="#512da8" stroke-width="8"/></svg>
                </span>
                <div class="project-info">
                    <div class="project-title">
                        <h3>Phel</h3>
                        <span class="github-stars"><i class="fa-solid fa-star"></i> <span class="star-count"></span></span>
                    </div>
                    <p>{{ trans(key="home_project_phel_desc", lang=lang) }}</p>
                </div>
            </a>
            <a target="_blank" rel="noopener" href="https://gacela-project.com/" class="project-card" data-repo="gacela-project/gacela">
                <span class="project-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 500 480"><g fill="none" stroke="#5a9fd4" stroke-width="8" stroke-linejoin="round"><path d="M5.9,287.9 24.8,229.5 58.4,205.4 43.6,242z"/><path d="M12.6,462.5 29.1,442.1 32,469.2z"/><path d="M27.1,330.5 33.9,345.4 50.4,346.9 29.1,442.1 12.6,462.5z"/><path d="M55.4,262.7 83.5,217.2 147.9,214.9 120.9,292.2 50.4,346.9 33.9,345.4 27.1,330.5z"/><path d="M58.4,205.4 83.5,217.2 55.4,262.7 43.6,242z"/><path d="M71.9,343.9 98.8,348.1 111,439.2 103.6,461.9z"/><path d="M111,439.2 121.9,461.9 103.6,461.9z"/><path d="M120.9,292.2 218.8,302.7 229.3,267.4 264.4,232.2 147.9,214.9z"/><path d="M144.5,294.9 120.9,292.2 71.9,330.3 71.9,343.9 98.8,348.1z"/><path d="M176.9,467.3 195.1,448 228.7,367.2 207.6,367.2 202.8,356.8z"/><path d="M176.9,467.7 195.1,448 199.1,472.5z"/><path d="M202.8,356.8 229.3,267.4 264.4,232.2 285.5,273.2 228.7,367.2 207.6,367.2z"/><path d="M272.3,16.2 376.8,61.5 405.4,106.3 390.4,136.3 383.5,132.1 384.6,121.9 363.5,68.7z"/><path d="M293.1,9.4 386.3,60.6 412.3,101.7 405.4,106.3 376.8,61.5 340.4,45.7z"/><path d="M302.9,177.3 147.9,214.9 83.5,217.2 58.4,205.4 133.5,179.7z"/><path d="M302.9,177.3 379.2,108.2 384.6,121.9 383.5,132.1 390.4,136.3 338.1,192.9z"/><path d="M303.3,368.6 274.2,297.1 310,267.1 325.5,351.3z"/><path d="M325.5,351.3 354.6,445.2 344.4,462.2 303.3,368.6z"/><path d="M338.1,192.9 264.4,232.2 147.9,214.9 302.9,177.3z"/><path d="M344.4,462.2 354.6,445.2 362.3,462.2z"/><path d="M365.3,220.7 267.6,302.7 285.5,273.2 264.4,232.2 338.1,192.9z"/><path d="M365.3,220.7 410.9,165.5 390.4,136.3 338.1,192.9z"/><path d="M390.4,136.3 383.5,132.1 389.4,78.9 400.3,116.6z"/><path d="M410.9,165.5 475.6,166.2 390.4,136.3z"/><path d="M412.3,101.7 433,124.8 482.2,151.3 475.6,166.2 390.4,136.3 405.4,106.3z"/><path d="M414.5,77 409.2,96.7 405.6,91z"/></g></svg>
                </span>
                <div class="project-info">
                    <div class="project-title">
                        <h3>Gacela</h3>
                        <span class="github-stars"><i class="fa-solid fa-star"></i> <span class="star-count"></span></span>
                    </div>
                    <p>{{ trans(key="home_project_gacela_desc", lang=lang) }}</p>
                </div>
            </a>
        </div>
    </section>

    <!-- Latest Content Section -->
    <section class="latest-section">
        <div class="section-header">
            <h2>{{ trans(key="home_latest", lang=lang) }}</h2>
            <a href="{% if lang == 'es' %}/es/blog/{% else %}/blog/{% endif %}" class="view-all">{{ trans(key="home_view_all", lang=lang) }}</a>
        </div>
        <div class="latest-grid">
            {% set blogs = get_section(path="blog/_index.md", lang=lang) %}
            {% set latest_blog = blogs.pages.0 %}
            <a href="{{ latest_blog.permalink }}" class="latest-card" data-from="{{latest_blog.date}}">
                {% if latest_blog.extra.static_thumbnail %}
                <div class="latest-card__thumb">
                    {% if latest_blog.extra.static_thumbnail is matching("^http[s]?://") %}
                        <img src="{{ latest_blog.extra.static_thumbnail | safe }}" alt="{{ latest_blog.title }}" loading="lazy" decoding="async" />
                    {% else %}
                        {% set thumb_path = latest_blog.extra.static_thumbnail | trim_start_matches(pat="/") %}
                        {% set thumb_webp = resize_image(path=thumb_path, width=400, height=225, op="fill", quality=75, format="webp") %}
                        {% set thumb_fb = resize_image(path=thumb_path, width=400, height=225, op="fill", quality=80) %}
                        <picture>
                            <source type="image/webp" srcset="{{ thumb_webp.url }}" />
                            <img src="{{ thumb_fb.url }}" alt="{{ latest_blog.title }}" width="{{ thumb_fb.width }}" height="{{ thumb_fb.height }}" loading="lazy" decoding="async" />
                        </picture>
                    {% endif %}
                </div>
                {% endif %}
                <span class="latest-type">{{ trans(key="nav_blog", lang=lang) }}</span>
                <h3>{{ latest_blog.title }}</h3>
                <p class="latest-preview">{{ latest_blog.description | truncate(length=120) }}</p>
                <span class="latest-date">
                    {% if lang == "es" %}{{ latest_blog.date | date(format="%d/%m/%Y") }}{% else %}{{ latest_blog.date | date(format="%B %d, %Y") }}{% endif %}
                    {% set reading_time = latest_blog.extra.reading_time | default(value=latest_blog.reading_time) %}
                    {% if reading_time %}
                        <span class="latest-reading-time">· {{ reading_time }} {{ trans(key="minutes_read", lang=lang) }}</span>
                    {% endif %}
                </span>
            </a>

            {% set readings = get_section(path="readings/_index.md", lang=lang) %}
            {% set latest_reading = readings.pages.0 %}
            <a href="{{ latest_reading.permalink }}" class="latest-card" data-from="{{latest_reading.date}}">
                {% if latest_reading.extra.static_thumbnail %}
                <div class="latest-card__thumb">
                    {% if latest_reading.extra.static_thumbnail is matching("^http[s]?://") %}
                        <img src="{{ latest_reading.extra.static_thumbnail | safe }}" alt="{{ latest_reading.title }}" loading="lazy" decoding="async" />
                    {% else %}
                        {% set thumb_path = latest_reading.extra.static_thumbnail | trim_start_matches(pat="/") %}
                        {% set thumb_webp = resize_image(path=thumb_path, width=400, height=225, op="fill", quality=75, format="webp") %}
                        {% set thumb_fb = resize_image(path=thumb_path, width=400, height=225, op="fill", quality=80) %}
                        <picture>
                            <source type="image/webp" srcset="{{ thumb_webp.url }}" />
                            <img src="{{ thumb_fb.url }}" alt="{{ latest_reading.title }}" width="{{ thumb_fb.width }}" height="{{ thumb_fb.height }}" loading="lazy" decoding="async" />
                        </picture>
                    {% endif %}
                </div>
                {% endif %}
                <span class="latest-type">{{ trans(key="nav_readings", lang=lang) }}</span>
                <h3>{{ latest_reading.title }}</h3>
                <p class="latest-preview">{{ latest_reading.description | truncate(length=120) }}</p>
                <span class="latest-date">
                    {% if lang == "es" %}{{ latest_reading.date | date(format="%d/%m/%Y") }}{% else %}{{ latest_reading.date | date(format="%B %d, %Y") }}{% endif %}
                    {% set reading_time = latest_reading.extra.reading_time | default(value=latest_reading.reading_time) %}
                    {% if reading_time %}
                        <span class="latest-reading-time">· {{ reading_time }} {{ trans(key="minutes_read", lang=lang) }}</span>
                    {% endif %}
                </span>
            </a>

        </div>
    </section>

    <!-- Connect Section -->
    <section class="connect-section">
        <div class="section-header">
            <h2>{{ trans(key="home_connect", lang=lang) }}</h2>
        </div>
        <div class="connect-links">
            <a href="https://github.com/Chemaclass" target="_blank" rel="noopener" class="connect-link connect-link--github" aria-label="GitHub profile">
                <i class="fa-brands fa-github"></i>
                <span>GitHub</span>
            </a>
            <a href="https://x.com/Chemaclass" target="_blank" rel="noopener" class="connect-link connect-link--twitter" aria-label="Twitter profile">
                <i class="fa-brands fa-x-twitter"></i>
                <span>Twitter</span>
            </a>
            <a href="https://www.linkedin.com/in/jose-maria-valera-reales/" target="_blank" rel="noopener" class="connect-link connect-link--linkedin" aria-label="LinkedIn profile">
                <i class="fa-brands fa-linkedin"></i>
                <span>LinkedIn</span>
            </a>
            <a href="mailto:me@chemaclass.es" class="connect-link connect-link--email" aria-label="Send email">
                <i class="fa-solid fa-envelope"></i>
                <span>Email</span>
            </a>
        </div>
    </section>
</div>
{% endblock content %}

{% block js %}
<script type="text/javascript" src="{{ get_url(path='github-stars.js') | safe }}" defer></script>
<script>
// Expandable about items
document.querySelectorAll('.about-list li.expandable').forEach(item => {
  const header = item.querySelector('.about-item-header');
  function toggle(e) {
    if (e.target.closest('a')) return;
    const expanded = item.classList.toggle('expanded');
    header.setAttribute('aria-expanded', expanded);
  }
  item.addEventListener('click', toggle);
  header.addEventListener('keydown', (e) => {
    if (e.key === 'Enter' || e.key === ' ') {
      e.preventDefault();
      toggle(e);
    }
  });
});

// Philosophy section
const philosophy = document.querySelector('.philosophy');
if (philosophy) {
  philosophy.addEventListener('click', () => {
    philosophy.classList.toggle('expanded');
  });
}
</script>
<script>
(function() {
  const lang = '{{ lang }}';
  const quotesEn = [
    "Programming is the art of simplifying routines.",
    "Individuals and interactions over tools.",
    "Open source everything.",
    "The process itself is the goal.",
    "Success is making people around me happier.",
    "A great engineer is not just a great coder.",
    "Nobody is perfect, but a team can be.",
    "Move from maker mode to multiplier.",
    "Practice makes the master.",
    "Testable code leads to better design.",
    "Refactoring is part of our daily job.",
    "Easy to test means good design.",
    "Making others happier compounds.",
    "People skills matter as much as technical.",
    "Change happens. Keep moving forward.",
    "Enjoy the process: that's the goal."
  ];
  const quotesEs = [
    "Programar es el arte de simplificar rutinas.",
    "Individuos e interacciones sobre herramientas.",
    "Open source para todo.",
    "El proceso en sí es el objetivo.",
    "El éxito es hacer más feliz a la gente a mi alrededor.",
    "Un gran ingeniero no es solo un gran programador.",
    "Nadie es perfecto, pero un equipo puede serlo.",
    "Pasar de modo creador a multiplicador.",
    "La práctica hace al maestro.",
    "El código testeable lleva a mejor diseño.",
    "Refactorizar es parte de nuestro trabajo diario.",
    "Fácil de testear significa buen diseño.",
    "Hacer feliz a los demás se multiplica.",
    "Las habilidades sociales importan tanto como las técnicas.",
    "El cambio ocurre. Sigue adelante.",
    "Disfruta el proceso: ese es el objetivo."
  ];
  const quotes = lang === 'es' ? quotesEs : quotesEn;
  const el = document.querySelector('.hero-quote p');
  if (!el) return;
  let last = -1;
  function showRandom() {
    let idx;
    do { idx = Math.floor(Math.random() * quotes.length); } while (idx === last);
    last = idx;
    el.style.opacity = 0;
    setTimeout(() => {
      el.textContent = '"' + quotes[idx] + '"';
      el.style.opacity = 1;
    }, 300);
  }
  showRandom();
  setInterval(showRandom, 7000);
})();
</script>
{% endblock js %}
