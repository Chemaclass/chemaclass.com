{% extends "blog/index.html" %}

{% import "helpers-preview.html" as helpers_preview %}

{% block title %}
  Readings | Chemaclass
{% endblock %}

{% block content %}
  {{ section.content | safe }}

  {% set pinned_posts = section.pages | filter(attribute="extra.pin", value=true) %}

  <div class="readings-previews">
    {% if pinned_posts %}
    <div class="readings-previews-highlighted">
      <h4>Highlighted</h4>
      {% for post in pinned_posts %}
        <div class="reading-preview">
          <h4>
            {{ post.date | date(format="%B %d, %Y") }}
          </h4>
          <div class="summary">
            {{ helpers_preview::summary(post=post,read_more=false) }}
          </div>
          <h3 class="reading-title">
            <a href="{{ post.permalink }}">{{ post.title }}</a>
            <br>
            {{ helpers_preview::author(post=post) }}
          </h3>
          {% if post.extra.current_reading %}
            <span class="reading-current no-select">Current read</span>
          {% endif %}
        </div>
      {% endfor %}
    </div>
    {% endif %}

    <hr style="clear: both;">

    {% for post in section.pages %}
      {%if post not in pinned_posts %}
        <div class="reading-preview">
          <h4>
            {{ post.date| date(format="%B %d, %Y") }}
          </h4>
          <div class="summary">
            {{ helpers_preview::summary(post=post,read_more=false) }}
          </div>
          <h3 class="reading-title">
            <a href="{{ post.permalink }}">{{ post.title }}</a>
            <br>
            {{ helpers_preview::author(post=post) }}
          </h3>
          {% if post.extra.current_reading %}
            <span class="reading-current no-select">Current read</span>
          {% endif %}
        </div>
      {% endif %}
    {% endfor %}
  </div>

  <footer>
    {{ helpers_preview::footer() }}
  </footer>
{% endblock %}
